========================================
  SAVE WARNING FEATURE COMPLETE!
========================================

‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!

========================================
  ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°
========================================

‚úÖ 1. Unsaved Changes Tracking
   - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° state ‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
   - ‡πÅ‡∏™‡∏î‡∏á "*" ‡πÉ‡∏ô title bar ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
   - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï title ‡∏ï‡∏≤‡∏° file ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà

‚úÖ 2. Close Event Handler
   - ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
   - ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: Save / Don't Save / Cancel
   - Auto-save ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ file path ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
   - Save As ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ file path

‚úÖ 3. Save/Save As System
   - Ctrl+S: Save (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ path ‡πÅ‡∏•‡πâ‡∏ß) ‡∏´‡∏£‡∏∑‡∏≠ Save As (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ)
   - Ctrl+Shift+S: Save As (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å path ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏™‡∏°‡∏≠)
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å path ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á save

‚úÖ 4. Window Title Updates
   - ‡πÅ‡∏™‡∏î‡∏á: "Ground Param - filename.json *"
   - "*" = ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
   - "Untitled" = ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå

========================================
  ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
========================================

üìù ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   1. ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô tab
   2. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ has_unsaved_changes = True
   3. ‡πÄ‡∏û‡∏¥‡πà‡∏° "*" ‡πÉ‡∏ô window title

üíæ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Save (Ctrl+S):
   - ‡∏°‡∏µ file path ‚Üí save ‡∏ó‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ file path ‚Üí ‡πÄ‡∏õ‡∏¥‡∏î Save As dialog

üìÇ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Save As (Ctrl+Shift+S):
   - ‡πÄ‡∏õ‡∏¥‡∏î dialog ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å path ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏™‡∏°‡∏≠
   - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï current_file_path

üìñ ‡πÄ‡∏°‡∏∑‡πà‡∏≠ Open:
   - ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å path ‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå
   - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ has_unsaved_changes = False
   - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï window title

‚ùå ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°:
   - ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:
     * ‡πÅ‡∏™‡∏î‡∏á dialog ‡∏ñ‡∏≤‡∏°
     * Save ‚Üí ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏¥‡∏î
     * Don't Save ‚Üí ‡∏õ‡∏¥‡∏î‡πÄ‡∏•‡∏¢‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
     * Cancel ‚Üí ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î
   - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:
     * ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

========================================
  Code Implementation
========================================

üìÑ ui/main_window.py:

1. __init__():
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° self.has_unsaved_changes = False
   - ‡πÄ‡∏û‡∏¥‡πà‡∏° self.current_file_path = None
   - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å _connect_change_signals()

2. _connect_change_signals():
   - ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° tab change signal ‡∏Å‡∏±‡∏ö _mark_as_changed()

3. _mark_as_changed():
   - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ has_unsaved_changes = True
   - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï window title

4. _mark_as_saved():
   - ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ has_unsaved_changes = False
   - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï window title

5. _update_window_title():
   - ‡πÅ‡∏™‡∏î‡∏á file name + "*" ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

6. closeEvent(event):
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö has_unsaved_changes
   - ‡πÅ‡∏™‡∏î‡∏á save prompt
   - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Save / Don't Save / Cancel

7. _save_to_file(path):
   - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å module
   - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï current_file_path
   - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å _mark_as_saved()

8. save_project():
   - ‡∏°‡∏µ path ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å _save_to_file()
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ path ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å save_project_as()

9. save_project_as():
   - ‡πÅ‡∏™‡∏î‡∏á Save As dialog
   - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å _save_to_file()

10. open_project():
    - ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
    - ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï current_file_path
    - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å _mark_as_saved()

========================================
  ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
========================================

Case 1: Save ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà
--------------------
1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
2. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
3. ‡∏Å‡∏î Ctrl+S
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å path ‚Üí "project.json"
5. Title: "... - project.json"

Case 2: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°
--------------------
1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå "project.json"
2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
3. Title: "... - project.json *"
4. ‡∏Å‡∏î Ctrl+S
5. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°
6. Title: "... - project.json" (‡πÑ‡∏°‡πà‡∏°‡∏µ *)

Case 3: ‡∏õ‡∏¥‡∏î‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà save
--------------------
1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
2. ‡∏Å‡∏î X ‡∏õ‡∏¥‡∏î‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°
3. ‡πÅ‡∏™‡∏î‡∏á prompt:
   "Do you want to save your changes?"
   [Save] [Don't Save] [Cancel]

Case 4: Save As ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏´‡∏°‡πà
--------------------
1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå "old.json"
2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
3. ‡∏Å‡∏î Ctrl+Shift+S
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "new.json"
5. Title: "... - new.json"
6. ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏° (old.json) ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á

========================================
  ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á
========================================

‚ö†Ô∏è Change Detection:
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô tab ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
   - ‡∏≠‡∏≤‡∏à‡∏°‡∏µ false positive (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô tab ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)
   - ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏á‡πà‡∏≤‡∏¢

‚ö†Ô∏è Auto-save:
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ auto-save ‡∏ó‡∏∏‡∏Å X ‡∏ô‡∏≤‡∏ó‡∏µ
   - ‡∏ï‡πâ‡∏≠‡∏á save ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

‚ö†Ô∏è Data Loss Prevention:
   - ‡∏ñ‡πâ‡∏≤‡∏Å‡∏î "Don't Save" ‚Üí ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á
   - ‡πÑ‡∏°‡πà‡∏°‡∏µ recovery ‡∏´‡∏£‡∏∑‡∏≠ undo

========================================
  ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö
========================================

‚úì Test 1: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚Üí Save ‚Üí ‡∏õ‡∏¥‡∏î (OK)
‚úì Test 2: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚Üí Don't Save ‚Üí ‡∏õ‡∏¥‡∏î (OK)
‚úì Test 3: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚Üí Cancel ‚Üí ‡πÑ‡∏°‡πà‡∏õ‡∏¥‡∏î (OK)
‚úì Test 4: Save ‚Üí ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚Üí Save ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö (OK)
‚úì Test 5: Open ‚Üí ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚Üí Save (OK)
‚úì Test 6: Save As ‚Üí ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô path (OK)

========================================
  ‡∏Å‡∏≤‡∏£ Compile
========================================

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ ‡∏ï‡πâ‡∏≠‡∏á rebuild:

python -m PyInstaller --clean Geotech.spec

========================================
Date: 2026-01-12
Feature: Save Warning System
Status: ‚úÖ Complete
========================================
